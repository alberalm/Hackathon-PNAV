<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Explorador de Rutas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    tr.seleccionada {
  background-color: #d0e8ff;
}
tr:hover {
  background-color: #f0f8ff;
  cursor: pointer;
}

    .filtros {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    select, input[type="date"] {
      padding: 6px;
    }
    .contenido {
      display: flex;
      gap: 20px;
    }
    table {
      border-collapse: collapse;
      width: 60%;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
    }
    .previsualizacion {
      border: 1px solid #ccc;
      padding: 10px;
      width: 35%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .espacio-pdf {
      height: 300px;
      background-color: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      margin-bottom: 10px;
    }
    .botones {
      display: flex;
      justify-content: space-between;
    }
    button {
      padding: 8px 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div class="filtros">
    <select name="provincia">
      <option value="">Provincia</option>
      <option value="leon">León</option>
      <option value="burgos">Burgos</option>
      <!-- Añadir más provincias -->
    </select>

    <select name="interes">
      <option value="">Me gustaría ver</option>
      <option value="naturaleza">Naturaleza</option>
      <option value="monumentos">Monumentos</option>
      <!-- Añadir más opciones -->
    </select>

    <input type="date" name="fecha">

    <select name="idioma">
      <option value="">Idioma</option>
      <option value="es">Español</option>
      <option value="en">Inglés</option>
      <!-- Añadir más idiomas -->
    </select>
  </div>

  <div class="contenido">
    <table>
      <thead>
        <tr>
          <th>Ruta</th>
          <th>Duración</th>
          <th>Longitud</th>
          <th>Dificultad</th>
          <th>Tiempo</th>
        </tr>
      </thead>
      <tbody id="tabla-rutas">
        <tr>
          <td>Ruta de León</td>
          <td>2h</td>
          <td>5 km</td>
          <td>Media</td>
          <td>☀️ 12:00</td>
        </tr>
        <!-- Más filas dinámicamente -->
      </tbody>
      
    </table>

    <div class="previsualizacion">
      <div class="espacio-pdf">
        <iframe id="visor-pdf" width="100%" height="100%" frameborder="0"></iframe>
      </div>
      <div class="botones">
        <button onclick="descargarPDF()">Descargar</button>
        <button onclick="cambiarIA()">Cambiar</button>
      </div>
    </div>
  </div>

  <script>
    let filaSeleccionada = null;
  
    document.querySelectorAll("#tabla-rutas tr").forEach(fila => {
      fila.addEventListener("click", () => {
        // Quitar selección previa
        document.querySelectorAll("#tabla-rutas tr").forEach(f => f.classList.remove("seleccionada"));
  
        // Seleccionar nueva
        fila.classList.add("seleccionada");
        filaSeleccionada = fila;
      });
    });
  </script>
  

  <script>

    function descargarPDF() {
  if (!filaSeleccionada) {
    alert("Por favor, selecciona una ruta de la tabla.");
    return;
  }

  const celdas = filaSeleccionada.querySelectorAll("td");
  const datosRuta = {
    nombre: celdas[0].innerText,
    duracion: celdas[1].innerText,
    longitud: celdas[2].innerText,
    dificultad: celdas[3].innerText,
    tiempo: celdas[4].innerText
  };

  fetch('/generar-pdf', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(datosRuta)
  })
  .then(res => res.blob())
  .then(blob => {
    const url = window.URL.createObjectURL(blob);
    document.getElementById('visor-pdf').src = url;

    const a = document.createElement('a');
    a.href = url;
    a.download = 'ruta_personalizada.pdf';
    document.body.appendChild(a);
    a.click();
    a.remove();
  });
}

  </script>
  



<script>
    function cambiarIA() {
      window.location.href = "/ia";
    }
</script>

</body>
</html>
