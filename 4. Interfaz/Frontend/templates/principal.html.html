<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Explorador de Rutas Naturales</title>
  <style>

      html, body {
      height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f7f4;
      color: #2d3e2f;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f0f7f4;
      color: #2d3e2f;
    }
    

    header {
      background-color: #3a7d44;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
    }

    .filtros {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 20px;
      background-color: #d9f2e6;
      border-bottom: 2px solid #a0d3b4;
      justify-content: center;
    }

    select, input[type="date"] {
      padding: 8px;
      border: 1px solid #a0d3b4;
      border-radius: 6px;
      background-color: #f5fff8;
      font-size: 1rem;
    }

    .taxones {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .taxones label {
      background-color: #e1f4ea;
      border: 1px solid #a0d3b4;
      border-radius: 6px;
      padding: 5px 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .contenido {
      display: flex;
      gap: 20px;
      padding: 20px;
      /* Calcula altura disponible tras header + filtros (ajusta 160px si cambian) */
      min-height: calc(100vh - 160px);
      align-items: stretch;
    }
    /* Contenedor scrollable para la tabla */
    
   table {
  display: block;            /* para que admita overflow */
  width: 60%;
  border-collapse: collapse;
  background-color: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

/* Cabecera fija, ocupa todo el ancho disponible */
thead {
  display: table;
  width: 100%;
  table-layout: fixed;       /* columnas fijas seg√∫n ancho de celda */
}

/* Cuerpo scrollable */
tbody {
  display: block;            /* bloque scrollable */
  max-height: 800px;         /* altura del scroll */
  overflow-y: auto;          /* scroll vertical */
  width: 100%;
}

/* Filas alineadas con el thead */
tbody tr {
  display: table;
  width: 100%;
  table-layout: fixed;
}

th, td {
  padding: 6px 10px;
  text-align: left;
  border-bottom: 1px solid #e0eee6;
}

th {
  background-color: #a0d3b4;
  color: #2d3e2f;
  font-weight: bold;
  position: sticky;
  top: 0;                    /* cabecera siempre visible */
  z-index: 1;
}

tr:hover {
  background-color: #e8f8e4;
  cursor: pointer;
}

    .previsualizacion {
      border: 1px solid #a0d3b4;
      border-radius: 10px;
      padding: 16px;
      width: 35%;
      background-color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      display: none;
      flex-direction: column;
      justify-content: space-between;
    }

    .espacio-pdf {
      height: 700px;
      background-color: #f0f7f4;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #7aa893;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 2px dashed #a0d3b4;
    }
    .dropdown-taxones {
  position: relative;
  display: inline-block;
}

.dropbtn {
  padding: 8px;
  border: 1px solid #a0d3b4;
  border-radius: 6px;
  background-color: #f5fff8;
  font-size: 1rem;
  cursor: pointer;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #ffffff;
  min-width: 200px;
  box-shadow: 0px 4px 8px rgba(0,0,0,0.1);
  border: 1px solid #a0d3b4;
  border-radius: 8px;
  padding: 10px;
  z-index: 1;
  flex-direction: column;
  gap: 6px;
}

.dropdown-content label {
  display: flex;
  align-items: center;
  font-size: 0.95rem;
  gap: 6px;
  margin-bottom: 4px;
  cursor: pointer;
}

.dropdown-taxones:hover .dropdown-content {
  display: flex;
  position: absolute;   /* aseg√∫rate de esto */
  z-index: 1000;
}


    .botones {
      display: flex;
      justify-content: space-between;
    }

    button {
      padding: 10px 18px;
      background-color: #3a7d44;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #2d5e33;
    }
    .thead {
      background-color: #a0d3b4;
      color: #2d3e2f;
      font-weight: bold;
      position: fixed;
      top: 0;                    /* cabecera siempre visible */
      z-index: 1;

    }

    .dropbtn {
  padding: 8px;
  border: 1px solid #a0d3b4;
  border-radius: 6px;
  background-color: #f5fff8;
  font-size: 1rem;
  color: #2d3e2f;
  min-width: 180px;
  font-family: inherit;
  text-align: left;
}




    .contenedor-mapa {
      width: 35%;
      text-align: center;
    }

    .mapa-img {
      width: 100%;
      max-width: 400px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 2px solid #a0d3b4;
    }
  </style>
</head>
<body>
  <header>üåø Explorador de Rutas Naturales</header>

  

  <div class="filtros">
    
    <div class="dropdown-taxones">
      <button type="button" class="dropbtn">Grupos Taxon√≥micos ‚Æü</button>
      <div class="dropdown-content">
        <label><input type="checkbox" value="peces"> Peces</label>
        <label><input type="checkbox" value="mamiferos"> Mam√≠feros</label>
        <label><input type="checkbox" value="hongos"> Hongos</label>
        <label><input type="checkbox" value="plantas_vasculares"> Plantas vasculares</label>
        <label><input type="checkbox" value="plantas_no_vasculares"> Plantas no vasculares</label>
        <label><input type="checkbox" value="aves"> Aves</label>
        <label><input type="checkbox" value="anfibios"> Anfibios</label>
        <label><input type="checkbox" value="invertebrados"> Invertebrados</label>
        <label><input type="checkbox" value="reptiles"> Reptiles</label>
      </div>
    </div>
    
    <select name="provincia">
      <option value="">Provincia</option>
      <option value="alava">√Ålava</option>
      <option value="albacete">Albacete</option>
      <option value="alicante">Alicante</option>
      <option value="almeria">Almer√≠a</option>
      <option value="asturias">Asturias</option>
      <option value="avila">√Åvila</option>
      <option value="badajoz">Badajoz</option>
      <option value="barcelona">Barcelona</option>
      <option value="burgos">Burgos</option>
      <option value="caceres">C√°ceres</option>
      <option value="cadiz">C√°diz</option>
      <option value="cantabria">Cantabria</option>
      <option value="castellon">Castell√≥n</option>
      <option value="ceuta">Ceuta</option>
      <option value="ciudadreal">Ciudad Real</option>
      <option value="cordoba">C√≥rdoba</option>
      <option value="cuenca">Cuenca</option>
      <option value="girona">Girona</option>
      <option value="granada">Granada</option>
      <option value="guadalajara">Guadalajara</option>
      <option value="guipuzcoa">Guip√∫zcoa</option>
      <option value="huelva">Huelva</option>
      <option value="huesca">Huesca</option>
      <option value="illesbalears">Illes Balears</option>
      <option value="jaen">Ja√©n</option>
      <option value="a coruna">A Coru√±a</option>
      <option value="la rioja">La Rioja</option>
      <option value="las palmas">Las Palmas</option>
      <option value="leon">Le√≥n</option>
      <option value="lleida">Lleida</option>
      <option value="lugo">Lugo</option>
      <option value="madrid">Madrid</option>
      <option value="malaga">M√°laga</option>
      <option value="melilla">Melilla</option>
      <option value="murcia">Murcia</option>
      <option value="navarra">Navarra</option>
      <option value="ourense">Ourense</option>
      <option value="palencia">Palencia</option>
      <option value="pontevedra">Pontevedra</option>
      <option value="salamanca">Salamanca</option>
      <option value="sansebastian">San Sebasti√°n</option>
      <option value="santacruztf">Santa Cruz de Tenerife</option>
      <option value="segovia">Segovia</option>
      <option value="sevilla">Sevilla</option>
      <option value="soria">Soria</option>
      <option value="tarragona">Tarragona</option>
      <option value="teruel">Teruel</option>
      <option value="toledo">Toledo</option>
      <option value="valencia">Valencia</option>
      <option value="valladolid">Valladolid</option>
      <option value="vizcaya">Vizcaya</option>
      <option value="zamora">Zamora</option>
      <option value="zaragoza">Zaragoza</option>
    </select>

    

    <input type="date" name="fecha">

    <button>Aplicar filtros</button>
  </div>

  

  <div class="contenido">
    <table>
      <thead>
        <tr>
          <th>Ruta</th>
          <th>Duraci√≥n</th>
          <th>Longitud</th>
          
        </tr>
      </thead>
      <tbody>
        
        <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
          <td>Ruta de Le√≥n</td>
          <td>2h</td>
          <td>5 km</td>
        </tr>

          
        </tr>
        <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
          <td>Sendero de Gredos</td>
          <td>3h</td>
          <td>7 km</td>
          
        </tr>
        <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
          <td>Camino del Ebro</td>
          <td>4h</td>
          <td>10 km</td>

          <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
            <td>Ruta de Murcia</td>
            <td>20h</td>
            <td>50 km</td>
          </tr>
          <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
            <td>Ruta de Galicia</td>
            <td>10h</td>
            <td>9 km</td>
          </tr>
          <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
            <td>Ruta de Le√≥n</td>
            <td>2h</td>
            <td>5 km</td>
          </tr>
  
            
          </tr>
          <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
            <td>Sendero de Gredos</td>
            <td>3h</td>
            <td>7 km</td>
            
          </tr>
          <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
            <td>Camino del Ebro</td>
            <td>4h</td>
            <td>10 km</td>
  
            <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
              <td>Ruta de Murcia</td>
              <td>20h</td>
              <td>50 km</td>
            </tr>
            <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
              <td>Ruta de Galicia</td>
              <td>10h</td>
              <td>9 km</td>
            </tr>

            <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
              <td>Ruta de Le√≥n</td>
              <td>2h</td>
              <td>5 km</td>
            </tr>
    
              
            </tr>
            <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
              <td>Sendero de Gredos</td>
              <td>3h</td>
              <td>7 km</td>
              
            </tr>
            <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
              <td>Camino del Ebro</td>
              <td>4h</td>
              <td>10 km</td>
    
              <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                <td>Ruta de Murcia</td>
                <td>20h</td>
                <td>50 km</td>
              </tr>
              <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                <td>Ruta de Galicia</td>
                <td>10h</td>
                <td>9 km</td>
              </tr>
              <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                <td>Ruta de Le√≥n</td>
                <td>2h</td>
                <td>5 km</td>
              </tr>
      
                
              </tr>
              <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                <td>Sendero de Gredos</td>
                <td>3h</td>
                <td>7 km</td>
                
              </tr>
              <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                <td>Camino del Ebro</td>
                <td>4h</td>
                <td>10 km</td>
      
                <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                  <td>Ruta de Murcia</td>
                  <td>20h</td>
                  <td>50 km</td>
                </tr>
                <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                  <td>Ruta de Galicia</td>
                  <td>10h</td>
                  <td>9 km</td>
                </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                  <td>Ruta de Le√≥n</td>
                  <td>2h</td>
                  <td>5 km</td>
                </tr>
        
                  
                </tr>
                <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                  <td>Sendero de Gredos</td>
                  <td>3h</td>
                  <td>7 km</td>
                  
                </tr>
                <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                  <td>Camino del Ebro</td>
                  <td>4h</td>
                  <td>10 km</td>
        
                  <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                    <td>Ruta de Murcia</td>
                    <td>20h</td>
                    <td>50 km</td>
                  </tr>
                  <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                    <td>Ruta de Galicia</td>
                    <td>10h</td>
                    <td>9 km</td>
                  </tr>
                  <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                    <td>Ruta de Le√≥n</td>
                    <td>2h</td>
                    <td>5 km</td>
                  </tr>
          
                    
                  </tr>
                  <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                    <td>Sendero de Gredos</td>
                    <td>3h</td>
                    <td>7 km</td>
                    
                  </tr>
                  <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                    <td>Camino del Ebro</td>
                    <td>4h</td>
                    <td>10 km</td>
          
                    <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                      <td>Ruta de Murcia</td>
                      <td>20h</td>
                      <td>50 km</td>
                    </tr>
                    <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                      <td>Ruta de Galicia</td>
                      <td>10h</td>
                      <td>9 km</td>
                    </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                      <td>Ruta de Le√≥n</td>
                      <td>2h</td>
                      <td>5 km</td>
                    </tr>
            
                      
                    </tr>
                    <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                      <td>Sendero de Gredos</td>
                      <td>3h</td>
                      <td>7 km</td>
                      
                    </tr>
                    <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                      <td>Camino del Ebro</td>
                      <td>4h</td>
                      <td>10 km</td>
            
                      <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                        <td>Ruta de Murcia</td>
                        <td>20h</td>
                        <td>50 km</td>
                      </tr>
                      <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                        <td>Ruta de Galicia</td>
                        <td>10h</td>
                        <td>9 km</td>
                      </tr>
                      <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                        <td>Ruta de Le√≥n</td>
                        <td>2h</td>
                        <td>5 km</td>
                      </tr>
              
                        
                      </tr>
                      <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                        <td>Sendero de Gredos</td>
                        <td>3h</td>
                        <td>7 km</td>
                        
                      </tr>
                      <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                        <td>Camino del Ebro</td>
                        <td>4h</td>
                        <td>10 km</td>
              
                        <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                          <td>Ruta de Murcia</td>
                          <td>20h</td>
                          <td>50 km</td>
                        </tr>
                        <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                          <td>Ruta de Galicia</td>
                          <td>10h</td>
                          <td>9 km</td>
                        </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                          <td>Ruta de Le√≥n</td>
                          <td>2h</td>
                          <td>5 km</td>
                        </tr>
                
                          
                        </tr>
                        <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                          <td>Sendero de Gredos</td>
                          <td>3h</td>
                          <td>7 km</td>
                          
                        </tr>
                        <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                          <td>Camino del Ebro</td>
                          <td>4h</td>
                          <td>10 km</td>
                
                          <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                            <td>Ruta de Murcia</td>
                            <td>20h</td>
                            <td>50 km</td>
                          </tr>
                          <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                            <td>Ruta de Galicia</td>
                            <td>10h</td>
                            <td>9 km</td>
                          </tr>
                          <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                            <td>Ruta de Le√≥n</td>
                            <td>2h</td>
                            <td>5 km</td>
                          </tr>
                  
                            
                          </tr>
                          <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                            <td>Sendero de Gredos</td>
                            <td>3h</td>
                            <td>7 km</td>
                            
                          </tr>
                          <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                            <td>Camino del Ebro</td>
                            <td>4h</td>
                            <td>10 km</td>
                  
                            <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                              <td>Ruta de Murcia</td>
                              <td>20h</td>
                              <td>50 km</td>
                            </tr>
                            <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                              <td>Ruta de Galicia</td>
                              <td>10h</td>
                              <td>9 km</td>
                            </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                              <td>Ruta de Le√≥n</td>
                              <td>2h</td>
                              <td>5 km</td>
                            </tr>
                    
                              
                            </tr>
                            <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                              <td>Sendero de Gredos</td>
                              <td>3h</td>
                              <td>7 km</td>
                              
                            </tr>
                            <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                              <td>Camino del Ebro</td>
                              <td>4h</td>
                              <td>10 km</td>
                    
                              <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                <td>Ruta de Murcia</td>
                                <td>20h</td>
                                <td>50 km</td>
                              </tr>
                              <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                <td>Ruta de Galicia</td>
                                <td>10h</td>
                                <td>9 km</td>
                              </tr>
                              <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                <td>Ruta de Le√≥n</td>
                                <td>2h</td>
                                <td>5 km</td>
                              </tr>
                      
                                
                              </tr>
                              <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                <td>Sendero de Gredos</td>
                                <td>3h</td>
                                <td>7 km</td>
                                
                              </tr>
                              <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                <td>Camino del Ebro</td>
                                <td>4h</td>
                                <td>10 km</td>
                      
                                <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                  <td>Ruta de Murcia</td>
                                  <td>20h</td>
                                  <td>50 km</td>
                                </tr>
                                <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                  <td>Ruta de Galicia</td>
                                  <td>10h</td>
                                  <td>9 km</td>
                                </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                  <td>Ruta de Le√≥n</td>
                                  <td>2h</td>
                                  <td>5 km</td>
                                </tr>
                        
                                  
                                </tr>
                                <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                  <td>Sendero de Gredos</td>
                                  <td>3h</td>
                                  <td>7 km</td>
                                  
                                </tr>
                                <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                  <td>Camino del Ebro</td>
                                  <td>4h</td>
                                  <td>10 km</td>
                        
                                  <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                    <td>Ruta de Murcia</td>
                                    <td>20h</td>
                                    <td>50 km</td>
                                  </tr>
                                  <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                    <td>Ruta de Galicia</td>
                                    <td>10h</td>
                                    <td>9 km</td>
                                  </tr>
                                  <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                    <td>Ruta de Le√≥n</td>
                                    <td>2h</td>
                                    <td>5 km</td>
                                  </tr>
                          
                                    
                                  </tr>
                                  <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                    <td>Sendero de Gredos</td>
                                    <td>3h</td>
                                    <td>7 km</td>
                                    
                                  </tr>
                                  <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                    <td>Camino del Ebro</td>
                                    <td>4h</td>
                                    <td>10 km</td>
                          
                                    <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                      <td>Ruta de Murcia</td>
                                      <td>20h</td>
                                      <td>50 km</td>
                                    </tr>
                                    <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                      <td>Ruta de Galicia</td>
                                      <td>10h</td>
                                      <td>9 km</td>
                                    </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                      <td>Ruta de Le√≥n</td>
                                      <td>2h</td>
                                      <td>5 km</td>
                                    </tr>
                            
                                      
                                    </tr>
                                    <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                      <td>Sendero de Gredos</td>
                                      <td>3h</td>
                                      <td>7 km</td>
                                      
                                    </tr>
                                    <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                      <td>Camino del Ebro</td>
                                      <td>4h</td>
                                      <td>10 km</td>
                            
                                      <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                        <td>Ruta de Murcia</td>
                                        <td>20h</td>
                                        <td>50 km</td>
                                      </tr>
                                      <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                        <td>Ruta de Galicia</td>
                                        <td>10h</td>
                                        <td>9 km</td>
                                      </tr>
                                      <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                        <td>Ruta de Le√≥n</td>
                                        <td>2h</td>
                                        <td>5 km</td>
                                      </tr>
                              
                                        
                                      </tr>
                                      <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                        <td>Sendero de Gredos</td>
                                        <td>3h</td>
                                        <td>7 km</td>
                                        
                                      </tr>
                                      <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                        <td>Camino del Ebro</td>
                                        <td>4h</td>
                                        <td>10 km</td>
                              
                                        <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                          <td>Ruta de Murcia</td>
                                          <td>20h</td>
                                          <td>50 km</td>
                                        </tr>
                                        <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                          <td>Ruta de Galicia</td>
                                          <td>10h</td>
                                          <td>9 km</td>
                                        </tr><tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                          <td>Ruta de Le√≥n</td>
                                          <td>2h</td>
                                          <td>5 km</td>
                                        </tr>
                                
                                          
                                        </tr>
                                        <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                          <td>Sendero de Gredos</td>
                                          <td>3h</td>
                                          <td>7 km</td>
                                          
                                        </tr>
                                        <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                          <td>Camino del Ebro</td>
                                          <td>4h</td>
                                          <td>10 km</td>
                                
                                          <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                            <td>Ruta de Murcia</td>
                                            <td>20h</td>
                                            <td>50 km</td>
                                          </tr>
                                          <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                            <td>Ruta de Galicia</td>
                                            <td>10h</td>
                                            <td>9 km</td>
                                          </tr>
                                          <tr data-id="1" onclick="mostrarPrevisualizacion(this)">
                                            <td>Ruta de Le√≥n</td>
                                            <td>2h</td>
                                            <td>5 km</td>
                                          </tr>
                                  
                                            
                                          </tr>
                                          <tr data-id="2" onclick="mostrarPrevisualizacion(this)">
                                            <td>Sendero de Gredos</td>
                                            <td>3h</td>
                                            <td>7 km</td>
                                            
                                          </tr>
                                          <tr data-id="3" onclick="mostrarPrevisualizacion(this)">
                                            <td>Camino del Ebro</td>
                                            <td>4h</td>
                                            <td>10 km</td>
                                  
                                            <tr data-id="4" onclick="mostrarPrevisualizacion(this)">
                                              <td>Ruta de Murcia</td>
                                              <td>20h</td>
                                              <td>50 km</td>
                                            </tr>
                                            <tr data-id="5" onclick="mostrarPrevisualizacion(this)">
                                              <td>Ruta de Galicia</td>
                                              <td>10h</td>
                                              <td>9 km</td>
                                            </tr>
        </tr>
      </tbody>
    </table>

    <div class="contenedor-mapa" id="mapa">
      <img src="{{ url_for('static', filename='mapa_espana.png') }}" alt="Mapa" class="mapa-img">
    </div>

    <div class="previsualizacion" id="previsualizacion">
      <div class="espacio-pdf">
        <iframe id="visor-pdf" width="100%" height="100%" frameborder="0"></iframe>
      </div>
      <input type="text" placeholder="Introduce un texto..." style="margin-bottom: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 6px;">
      <div class="botones">
        <button>Aplicar</button>
        <button onclick="descargarPDF()">Descargar</button>
      </div>
    </div>
  </div>

  <script>
    // 2) Ahora recibimos la fila (tr) y sacamos sus datos
    async function mostrarPrevisualizacion(tr) {
  // Oculto mapa / muestro previsualizaci√≥n
  document.getElementById('mapa').style.display = 'none';
  document.getElementById('previsualizacion').style.display = 'flex';

  // Extraigo el ID de la ruta de data-id
  const idRuta   = tr.dataset.id; 
  const nombre   = tr.cells[0].textContent;
  const duracion = tr.cells[1].textContent;
  const longitud = tr.cells[2].textContent;

  // Pido las especies seg√∫n el id
  const especies = await cargarEspecies(idRuta);

  // Genero el PDF incluyendo esas especies
  const resp = await fetch('/generar_pdf', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id_ruta: idRuta, nombre, duracion, longitud, especies })
  });
  const blob = await resp.blob();
  const url  = URL.createObjectURL(blob);
  document.getElementById('visor-pdf').src = url;
}

async function cargarEspecies(idRuta) {
  // Cach√© simple
  if (especiesCache[idRuta]) return especiesCache[idRuta];
  const res = await fetch('/obtener_especies', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id_ruta: idRuta })
  });
  const lista = await res.json();
  especiesCache[idRuta] = lista;
  return lista;
}

    // 5) Devolver siempre el array para poder usarlo arriba
    const especiesCache = {};
    async function cargarEspecies(idRuta) {
      if (especiesCache[idRuta]) return especiesCache[idRuta];
      try {
        const res  = await fetch('/obtener_especies',{
          method: 'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ id_ruta: idRuta })
        });
        const esp = await res.json();
        especiesCache[idRuta] = esp;
        console.log('Especies obtenidas:', esp);
        return esp;
      } catch (e) {
        console.error('Error al obtener especies:', e);
        return [];
      }
    }
  
    function descargarPDF() {
      
    }
  </script>
  




</body>
</html>
